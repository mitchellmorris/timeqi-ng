<div class="m-8">
@if (!loading) {
  <p-table 
    [value]="tasks"
    showGridlines
    stripedRows
    >
      <ng-template #header>
          <tr>
              <th>Name</th>
              <th>Assignee</th>
              <th>Actions</th>
          </tr>
      </ng-template>
      <ng-template #body let-task>
          <tr>
              <td>{{ task.name }}</td>
              <td>{{ task.assignee.name }}</td>
              <td>
                <p-splitbutton 
                  label="Review" 
                  icon="pi pi-eye" 
                  [model]="taskActions" 
                  (onClick)="router.navigate(['project', projectId, 'task', task._id])"
                  (onMenuShow)="activeTaskId = task._id" 
                  (onMenuHide)="activeTaskId = null"
                ></p-splitbutton>
              </td>
          </tr>
      </ng-template>
  </p-table>
} @else {
  <p>Loading ...</p>
}
</div>
<p-dialog 
  [header]="activeTaskLabel" 
  [modal]="true" 
  [(visible)]="isTaskOpen"
  (onHide)="router.navigate(['project', this.projectId])"
  [style]="{ width: '50rem' }"
  >
  <router-outlet />
</p-dialog>

